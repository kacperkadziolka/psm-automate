import{T as f}from"./TopBar-b1b28c9d.js";import{i as h,_ as D,d as m,t as b,j as v,u as w,e as _}from"./index-aed13327.js";import{_ as y,g as M,o as i,c as l,h as k,a as e,b as V,w as d,v as c,t as C,e as S,F,p as q,d as B}from"./index-f8af5991.js";const O={name:"MaitenanceDataView",components:{TopBar:f},props:{reg_number:String},data(){return{motorOilDate:"",coolantFluidDate:"",brakePadsDate:"",overallConditionDate:"",hasMaintenanceData:!1,errorMessage:null}},async created(){const o=h(m(_,"maitenance"),D("reg_number","==",this.reg_number)),t=await b(o);this.hasMaintenanceData=t.size>0},methods:{async addMaitenanceData(){const o=h(m(_,"maitenance"),D("reg_number","==",this.reg_number)),u=(await b(o)).docs;if(u.length>0)try{const r=u[0];await v(r.ref,{motor_oil:new Date(this.motorOilDate),coolant_fluid:new Date(this.coolantFluidDate),brake_pads:new Date(this.brakePadsDate),overall_condition:new Date(this.overallConditionDate)}),this.$router.push({name:"CarDetailsView",params:{reg_number:this.reg_number}})}catch(r){console.error("Error updating document: ",r),this.errorMessage="An error occurred while updating maintenance data."}else try{await w(m(_,"maitenance"),{reg_number:this.reg_number,motor_oil:new Date(this.motorOilDate),coolant_fluid:new Date(this.coolantFluidDate),brake_pads:new Date(this.brakePadsDate),overall_condition:new Date(this.overallConditionDate)}),this.$router.push({name:"CarDetailsView",params:{reg_number:this.reg_number}})}catch(r){console.error("Error adding document: ",r),this.errorMessage="An error occurred while adding maintenance data."}}}},s=o=>(q("data-v-d3e34846"),o=o(),B(),o),x={class:"container"},P=s(()=>e("h1",{class:"header mt-4 mb-3"},"Fill the maintenance intervals:",-1)),T={class:"form-group"},U=s(()=>e("label",null,"Motor oil and filters:",-1)),I={class:"form-group"},A=s(()=>e("label",null,"Coolant fluid:",-1)),E={class:"form-group"},N=s(()=>e("label",null,"Braking system:",-1)),Q={class:"form-group"},j=s(()=>e("label",null,"Overal maitenance:",-1)),z={key:0,type:"submit",class:"btn btn-primary mt-3"},G={key:1,type:"submit",class:"btn btn-success mt-3"},H={key:0,class:"alert alert-danger"};function J(o,t,u,r,a,p){const g=M("TopBar");return i(),l(F,null,[k(g),e("div",x,[P,e("form",{onSubmit:t[4]||(t[4]=V((...n)=>p.addMaitenanceData&&p.addMaitenanceData(...n),["prevent"]))},[e("div",T,[U,d(e("input",{type:"date",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=n=>a.motorOilDate=n),required:""},null,512),[[c,a.motorOilDate]])]),e("div",I,[A,d(e("input",{type:"date",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=n=>a.coolantFluidDate=n),required:""},null,512),[[c,a.coolantFluidDate]])]),e("div",E,[N,d(e("input",{type:"date",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=n=>a.brakePadsDate=n),required:""},null,512),[[c,a.brakePadsDate]])]),e("div",Q,[j,d(e("input",{type:"date",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=n=>a.overallConditionDate=n),required:""},null,512),[[c,a.overallConditionDate]])]),a.hasMaintenanceData?(i(),l("button",G,"Update maitenance data")):(i(),l("button",z,"Add maitenance data"))],32),a.errorMessage?(i(),l("div",H,C(a.errorMessage),1)):S("",!0)])],64)}const W=y(O,[["render",J],["__scopeId","data-v-d3e34846"]]);export{W as default};
